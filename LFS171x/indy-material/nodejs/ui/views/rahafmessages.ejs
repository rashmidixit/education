<div id="messages" class="tab" style="display:none;">
  <div class="w3-padding rahafmessages">
    <ul class="w3-ul w3-border">
      <%for(var message of messages) {%>
        <li>
              <button class="w3-btn w3-white w3-right" onclick="request('/api/messages/delete', 'POST', JSON.stringify({messageId: '<%=message.id%>'}))"><i class="fa fa-trash"></i></button>
              <%if(message.relationshipName) {%>
                  <p><b><%=message.relationshipName%></b></p>
              <%}%>
              <p> is requesting for your </p>
              <div>
                  <%if (message.message.type === messageTypes.connections.REQUEST) {%>
                      <form>
                          <input type="hidden" id="connection_message_id" value="<%=message.id%>">
                          <input type="text" id="connection_name" required/>
                          <%if (message.links.accept) {%>
                              <button class="w3-btn w3-white w3-border" type="submit" onclick="request('<%=message.links.accept.href%>', '<%=message.links.accept.method%>', JSON.stringify({ name: document.getElementById('connection_name').value, messageId: document.getElementById('connection_message_id').value}))">Accept Connection Request</button>
                          <%}%>
                          <%if (message.links.reject) {%>
                              <button class="w3-btn w3-white w3-border" type="submit" onclick="request('<%=message.links.reject.href%>', '<%=message.links.reject.method%>')">Reject Connection Request</button>
                          <%}%>
                          <br><br>
                      </form>
                  <%} else if(message.message.type === messageTypes.proofs.REQUEST) {%>
                          <%for(let attr of Object.keys(message.message.message.proofRequest.requested_attributes)) {%>
                              <p><b><%=message.message.message.proofRequest.requested_attributes[attr].name%></b></p>
                          <%}%>
                      <%for(let link of message.links) {%>
                          <button class="w3-btn w3-white w3-border" type="submit" onclick="request('<%=link.href%>', '<%=link.method%>', '<%=link.message%>')"><%=link.name%></button>
                      <%}%>
                      <br><br>
                  <%} else {%>
                      <%if(message.links) {%>
                          <%for(let link of message.links) {%>
                              <button class="w3-btn w3-white w3-border" type="submit" onclick="request('<%=link.href%>', '<%=link.method%>', '<%=link.message%>')"><%=link.name%></button>
                          <%}%>
                      <%} else {%>
                          <p>Message:</p>
                          <p><%=message.message.message%></p>
                      <%}%>
                      <br><br>
                  <%}%>
              </div>
        </li>
      <%}%>
    </ul>
  </div>
</div>
